# Парсер данных с тел. станции

## Описание
Парсинг данных осуществляется со стации **nec** по протоколу **SMDR** 

Парсер работает в постоянном режиме, демоном (службой).

## Команды управления

### Проверка состояния
`systemctl -l status phone`

Если все работает нормально, в консоли отобразиться:

![статус](/description/status.png)

Так же проверить работоспособность можно выполнив комманду:
`ps -aux | grep nec`

### Запуск парсера
`systemctl start phone`

### Остановка парсера
`systemctl stop phone`

### Перезапуск
`systemctl restart phone`

## База данных
В качестве хранения данных используется nosql субд **mongodb**.

Созданно две коллекции (таблицы):
- calls - тел. звонки
- phones - список тел. станций.

В коллеции `phones` присутствует поле enabled, если его переключить в `false` - 
данные по этой станции обрабатываться не будут.

**Важно** - для применения изменений - сервис нужно перезапустить: `systemctl restart phone`

## Мониторинг
Парсер постоянно мониторятся заббиксом.

Заббикс раз в **60** секунд смотрит запущен ли процесс парсера. 
Если процесс не запущен - посылает эл.письмо.
